---
title: txlog
section: 1
header: Transaction Log - Agent
footer: txlog 1.9.0
date: November 10, 2025
---

# NAME

**txlog**: Compile data on the number of updates and installs using
yum / dnf transaction info.

# SYNOPSIS

**txlog** [*COMMAND*]

# DESCRIPTION

The **txlog** command is a tool for compiling and sending transaction data from
RPM-based systems to the Txlog server. It collects information about package
installations, updates, and removals, providing a comprehensive view of system
changes over time. This data can be used for monitoring, analytics, and
troubleshooting purposes. The agent operates by reading transaction logs
generated by package managers like `yum` or `dnf`, processing the information,
and then sending it to a specified Txlog server for storage and analysis. The
agent is designed to be lightweight and efficient, minimizing its impact on
system performance while ensuring accurate and timely data collection.

# COMMANDS

**build**
: Compile transaction info

**help**
: You know what this option does

**verify**
: Verify data integrity between local DNF history and server

**version**
: Show agent and server version number

## FLAGS

**--config**
: config file (default is /etc/txlog.yaml)

**--help**
: help for txlog. Use "txlog [command] --help" for more information about a command

# ENVIRONMENT VARIABLES

**NO_COLOR**
: When set to any value (even an empty string), disables colored output and emoji
icons in all txlog commands. This follows the standard defined at
<https://no-color.org>. Useful for CI/CD pipelines, logging to files, or terminals
that don't support colors. Example: `NO_COLOR=1 txlog build`

# CONFIGURATION FILE

**/etc/txlog.yaml**
Normally `txlog` uses sane defaults, but if you want to activate any option or
integration, go to this file, uncomment the section and modify it. Useful during
development, since you can set another parameters for this environment.

# CONFIGURATION OPTIONS

All data is sent to the Transaction Log server.

## Agent section

**check_version** (boolean)
: Controls whether the agent checks for new versions when running txlog version.
When enabled, the agent will contact https://txlog.rda.run/agent/version to
verify if a new version is available. Default: true

## Server section

**url** (string)
: Specifies the URL of the txlog server where logs will be sent. Must include
protocol (http/https) and port if not using defaults. Default: http://localhost:8080

### Authentication

The agent supports two authentication methods: API key authentication and basic
authentication. You should configure only one authentication method.

**api_key** (string, optional)
: API key for authenticating with the txlog server. This is the recommended
authentication method. The API key should be in the format `txlog_...` and is
sent via the `X-API-Key` HTTP header. Must be uncommented to enable API key
authentication. Default: not set

**username** (string, optional)
: Username for basic authentication with the txlog server. This is a legacy
authentication method. Must be uncommented to enable basic authentication.
Should be used in conjunction with password. Default: not set

**password** (string, optional)
: Password for basic authentication with the txlog server. Must be uncommented
to enable basic authentication. Should be used in conjunction with username.
Default: not set

**Note:** If both API key and basic authentication credentials are configured,
the agent will use the API key and ignore the username/password. It is
recommended to configure only one authentication method to avoid confusion.

### API Key Server Compatibility

**Important:** API key authentication requires Txlog Server version 1.14.0 or
higher. When an API key is configured, the agent automatically validates the
server version on startup. If the server version is below 1.14.0, the agent will
exit with an error message indicating the incompatibility.

If you encounter a compatibility error, you have two options:

1. Upgrade the Txlog Server to version 1.14.0 or higher
2. Use basic authentication (username and password) instead of API key

Common error messages:

- **"authentication failed: invalid credentials (API key or username/password)"** - The
  credentials provided are not valid. Check that the API key or username/password
  are correct and have not been revoked in the server.
- **"server version X does not support API key authentication"** - The server
  version is too old. Upgrade to version 1.14.0 or higher.
- **"failed to connect to server"** - Cannot reach the server. Check the URL
  and network connectivity.

# SYSTEM MONITORING

The agent collects additional system information beyond transaction data to
provide comprehensive monitoring capabilities.

## Data Integrity Verification

The `txlog verify` command allows you to verify that all local DNF transaction
data has been properly replicated to the Txlog server. This is useful for
ensuring data integrity and identifying any synchronization issues.

The verification process checks:

1. **Missing Transactions**: Identifies transactions that exist in the local DNF
   history but have not been sent to the server. These transactions may have been
   skipped during a previous `txlog build` execution due to errors or interruptions.

2. **Transaction Items Integrity**: For each transaction that exists on the server,
   verifies that all package items (installations, upgrades, removals) are correctly
   recorded. The verification compares:
   - Package names, versions, releases, epochs, and architectures
   - Action types (Install, Upgrade, Remove, etc.)
   - Repository information

The command provides color-coded output for easy identification of issues:

- **Green (✓)**: Data is verified successfully, no issues found
- **Red (✗)**: Critical issues detected (missing transactions or items)
- **Yellow (⚠)**: Warnings (extra items on server that don't exist locally)

After running `txlog verify`, if any issues are detected, you can run `txlog build`
to synchronize the missing data with the server.

**Exit Codes:**

- **0**: Verification successful, all data is intact
- **1**: Verification failed, issues detected or errors occurred

**Example usage:**

```bash
# Verify data integrity
sudo txlog verify

# Use with custom config file
sudo txlog verify --config /path/to/custom/txlog.yaml
```

**Note:** The verify command requires the same authentication and server
configuration as the build command. Ensure your `/etc/txlog.yaml` is properly
configured before running verification.

## Operating System Information

The agent automatically collects and sends operating system details to the
server by reading `/etc/os-release`. This includes the OS name, version, and
distribution information. This data helps the server track which systems are
running specific OS versions.

## Reboot Requirements

When the Txlog Server version is 1.8.0 or higher, the agent automatically checks
if the system needs to be restarted using the `dnf needs-restarting -r` command.
This check is performed during the `txlog build` execution and the results are
sent to the server along with execution metadata.

The reboot detection helps administrators identify systems that require restart
after package updates, particularly for kernel updates, systemd updates, or other
critical system components. The agent sends both a boolean indicator of whether
a reboot is needed and the detailed reason output from the needs-restarting
command.

**Note:** This feature is only active when the Txlog Server is running version
1.8.0 or higher. The agent automatically detects the server version and enables
this feature accordingly.

# BUGS

Submit bug reports online at
<https://github.com/txlog/agent/issues>

# SEE ALSO

Full documentation and sources at
<https://txlog.rda.run>
